#!/bin/sh
# postinst script for enlightenment
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postinst> `configure' <most-recently-configured-version>
#        * <old-postinst> `abort-upgrade' <new version>
#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
#          <new-version>
#        * <postinst> `abort-remove'
#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
#          <failed-install-package> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    configure)
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#
path=$(find /usr/lib -path '*/enlightenment/utils/enlightenment_sys')
if [ -z "${path}" ]
then
  echo "*/enlightenment/utils/enlightenment_sys not found under /usr/lib"
  exit 1
fi
sudo chmod u+s ${path}
path=$(find /usr/lib -path '*/enlightenment/modules/cpufreq/linux-*/freqset')
if [ -z "${path}" ]
then
  echo "*/enlightenment/modules/cpufreq/linux-*/freqset not found under /usr/lib"
  exit 1
fi
sudo chmod ug+s ${path}
path=$(find /usr/lib -path '*/enlightenment/utils/enlightenment_backlight')
if [ -z "${path}" ]
then
  echo "*/enlightenment/utils/enlightenment_backlight not found under /usr/lib"
  exit 1
fi
sudo chmod a=rx,u+xws ${path}
sudo rm -rf /usr/share/enlightenment/data/config/standard
sudo rm -rf /usr/share/enlightenment/data/config/illume
sudo rm -rf /usr/share/enlightenment/data/config/mobile

#zenity --info --title="Enlightenment Update" --text="Your Enlightenment desktop has been updated! Please do a <b>full</b> system restart after these updates complete."
exit 0
